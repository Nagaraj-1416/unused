const targetForm = document.querySelector('[data-testid="klaviyo-form-S7EHmJ"]');

if (targetForm) {
  const handleImageAttributes = (element) => {
    const images = element.querySelectorAll('img');

    images.forEach((img) => {
      // Add empty alt if missing
      if (!img.hasAttribute('alt') || img.getAttribute('alt') === null) {
        img.setAttribute('alt', '');
      }

      // Remove tabindex if present
      if (img.hasAttribute('tabindex')) {
        img.removeAttribute('tabindex');
      }
    });
  };

  // Initial check on load
  handleImageAttributes(targetForm);

  // Set up the observer
  const observer = new MutationObserver((mutationsList) => {
    mutationsList.forEach((mutation) => {
      mutation.addedNodes.forEach((node) => {
        if (node.nodeType === Node.ELEMENT_NODE) {
          // Process new elements and their children
          handleImageAttributes(node);
        }
      });
    });
  });

  observer.observe(targetForm, {
    childList: true,
    subtree: true,
  });
}
