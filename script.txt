https://qhh83hshwulo64vw-57151226063.shopifypreview.com/products_preview?preview_key=b10dea078daba7983d8947514167dffa

<div class="slider" id="mobile-slider">
  <div class="product-label-container">
    {% assign specific_tag = 'Badge:Preorder' %}
    {% assign specific_tag_value = 'Badge:ComingSoon' %}
    {% if product.available == false %}
      {% if product.tags contains 'Badge:Isabella' %}
        <div class="product-label two-line-badge"><span>As Seen On</span> <span>Isabella Strahan</span></div>
      {% elsif product.tags contains 'Badge:Rachel' %}
        <div class="product-label two-line-badge"><span>As Seen On</span> <span>Rachel Platten</span></div>
      {% elsif product.tags contains 'Badge:Stylist' %}
        <div class="product-label two-line-badge badge"><span>Stylist's</span> <span>Pick</span></div>
      {% elsif product.tags contains specific_tag %}
        <div class="product-label">PREORDER</div>
      {% elsif product.tags contains specific_tag_value %}
        <div class="product-label">COMING SOON</div>
      {% endif %}
    {% else %}
      {% if product.tags contains 'Badge:Isabella' %}
        <div class="product-label two-line-badge"><span>As Seen On</span> <span>Isabella Strahan</span></div>
      {% elsif product.tags contains 'Badge:Rachel' %}
        <div class="product-label two-line-badge"><span>As Seen On</span> <span>Rachel Platten</span></div>
      {% elsif product.tags contains 'Badge:Stylist' %}
        <div class="product-label two-line-badge badge"><span>Stylist's</span> <span>Pick</span></div>
      {% elsif product.tags contains specific_tag %}
        <div class="product-label">PREORDER</div>
      {% else %}
        {% for t in product.tags %}
          {% if t contains 'Badge:BackinStock' %}
            <div class="product-label">BACK IN STOCK</div>
          {% elsif t contains 'smarttag_new_arrival' %}
            <div class="product-label">NEW</div>
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endif %}
  </div>

  <div class="image-container">
    {% for image in product.images %}
      <div>
        <img
          class="w-full"
          src="{{ image | img_url: '800x' }}"
          data-zoom="{{ image | img_url: 'master' }}"
          alt="White"
          {% if forloop.first %}id="mainMobileImage"{% endif %}
        >
      </div>
    {% endfor %}
  </div>
  <div class="dots"></div>
</div>

<!-- Color Swatches -->
<div class="color-circle-container">
  {% for variant in product.variants %}
    {% assign value = variant.option1 %}
    <div class="color-swatch-link" data-color-name="{{ value }}" data-variant-id="{{ variant.id }}">
      {% assign swatch_image = '' %}
      {% assign lower_value = value | downcase %}

      {% for image in product.images %}
        {% if image.src contains lower_value and image.src contains '_sw' %}
          {% assign swatch_image = image %}
          {% break %}
        {% endif %}
      {% endfor %}

      {% if swatch_image != '' %}
        <img class="color-variant" src="{{ swatch_image | img_url: '1024x' }}" alt="{{ value }}">
      {% else %}
        <div class="color-variant no-image-color" style="background-color: {{ value | downcase }};"></div>
      {% endif %}
    </div>
  {% endfor %}
</div>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const variants = {{ product.variants | json }};
    let selectedColor = "{{ product.selected_or_first_available_variant.option1 }}";
    let selectedSize = "";
    const variantInput = document.getElementById("pdp-cart-btn");
    const addToCartBtn = document.querySelector(".add-to-cart-btn");
    const colorLinks = document.querySelectorAll(".color-swatch-link");
    const sizeItems = document.querySelectorAll(".size-item");
    const priceDisplay = document.getElementById("variant-price");
    const priceDisplayDesktop = document.getElementById("variant-price-desktop");
	const colorDisplay = document.getElementById("variant-color");
    function updateDisplayedPrice(matchedVariant) {
      if (matchedVariant) {
        priceDisplay.textContent = matchedVariant.price
          ? `$${(matchedVariant.price / 100).toFixed(2)}`
          : '';
         priceDisplayDesktop.textContent = matchedVariant.price
          ? `$${(matchedVariant.price / 100).toFixed(2)}`
          : '';
		 colorDisplay.textContent = selectedColor ? selectedColor : ''
      } else {
        priceDisplay.textContent = '';
      }
    }
    function updateSelectedVariant() {
      let matchedVariant = variants.find(v =>
        v.option1.toLowerCase() === selectedColor.toLowerCase() &&
        v.option2.toLowerCase() === selectedSize.toLowerCase()
      );
      if (!matchedVariant && selectedSize) {
        const numberMatch = selectedSize.match(/^\d+/);
        if (numberMatch) {
          const sizeNumber = numberMatch[0];
          matchedVariant = variants.find(v =>
            v.option1.toLowerCase() === selectedColor.toLowerCase() &&
            v.option2.toLowerCase().startsWith(sizeNumber)
          );
        }
      }
      if (!matchedVariant) {
        matchedVariant = variants.find(v =>
          v.option1.toLowerCase() === selectedColor.toLowerCase()
        );
      }
      if (matchedVariant && matchedVariant.available) {
        variantInput.value = matchedVariant.id;
        addToCartBtn.disabled = false;
      } else {
        variantInput.value = "";
        addToCartBtn.disabled = true;
      }
      updateDisplayedPrice(matchedVariant);
    }
    function selectFirstAvailableSizeForColor() {
      let firstAvailable = null;
      sizeItems.forEach(item => {
        const size = item.textContent.trim();
        const matchingVariant = variants.find(v =>
          v.option1.toLowerCase() === selectedColor.toLowerCase() &&
          v.option2.toLowerCase() === size.toLowerCase() &&
          v.available
        );
        item.classList.remove("active");
        if (matchingVariant && !firstAvailable) {
          firstAvailable = item;
          selectedSize = size;
        }
      });
      if (firstAvailable) {
        firstAvailable.classList.add("active");
        updateSelectedVariant();
      }
    }
    colorLinks.forEach(link => {
      link.addEventListener("click", () => {
        colorLinks.forEach(l => l.classList.remove("active"));
        link.classList.add("active");
        selectedColor = link.dataset.colorName || link.textContent.trim();
        document.querySelector("#selected-color strong").innerText = selectedColor.toUpperCase();
        selectedSize = "";
        sizeItems.forEach(item => item.classList.remove("active"));

 
        // Update available sizes
        sizeItems.forEach(item => {
          const size = item.textContent.trim();
          const matchingVariant = variants.find(v =>
            v.option1.toLowerCase() === selectedColor.toLowerCase() &&
            v.option2.toLowerCase() === size.toLowerCase()
          );
          if (matchingVariant && matchingVariant.available) {
            item.classList.remove("size-unavailable");
          } else {
            item.classList.add("size-unavailable");
          }
        });
 

        selectFirstAvailableSizeForColor();
      });
    });
    sizeItems.forEach(item => {
      item.addEventListener("click", () => {
        if (item.classList.contains("size-unavailable")) return;
        if (item.classList.contains("active")) {
          item.classList.remove("active");
          selectedSize = "";
          variantInput.value = "";
          addToCartBtn.disabled = true;
          updateDisplayedPrice(null);
 

          selectFirstAvailableSizeForColor();
        } else {
          sizeItems.forEach(i => i.classList.remove("active"));
          item.classList.add("active");
          selectedSize = item.dataset.sizeName || item.textContent.trim();
          updateSelectedVariant();
        }
      });
    });
 

    const firstColorLink = colorLinks[0];
    if (firstColorLink) {
      firstColorLink.classList.add("active");
      selectedColor = firstColorLink.dataset.colorName || firstColorLink.textContent.trim();
      document.querySelector("#selected-color strong").innerText = selectedColor.toUpperCase();
 

      sizeItems.forEach(item => {
        const size = item.textContent.trim();
        const matchingVariant = variants.find(v =>
          v.option1.toLowerCase() === selectedColor.toLowerCase() &&
          v.option2.toLowerCase() === size.toLowerCase()
        );
        if (matchingVariant && matchingVariant.available) {
          item.classList.remove("size-unavailable");
        } else {
          item.classList.add("size-unavailable");
        }
      });
 

      selectFirstAvailableSizeForColor();
    }
  });
</script>


[
     {
          "id": 44313099763919,
          "title": "BLACK / 20''",
          "option1": "BLACK",
          "option2": "20''",
          "option3": null,
          "sku": "5705045-BLACK-20''",
          "requires_shipping": true,
          "taxable": true,
          "featured_image": {
               "id": 29456530243791,
               "product_id": 7642365001935,
               "position": 1,
               "created_at": "2021-08-26T18:29:36-04:00",
               "updated_at": "2021-08-26T18:29:39-04:00",
               "alt": "Black",
               "width": 1220,
               "height": 1500,
               "src": "//k7z28xacwip1yfjq-57151226063.shopifypreview.com/cdn/shop/products/5705065_black_1-v2.jpg?v=1630016979",
               "variant_ids": [
                    44313099763919,
                    44313099796687,
                    44313099829455,
                    44313099862223
               ]
          },
          "available": true,
          "name": "Out Of Bounds Lightweight Hard Side Spinner Suitcase - BLACK / 20''",
          "public_title": "BLACK / 20''",
          "options": [
               "BLACK",
               "20''"
          ],
          "price": 18000,
          "weight": 0,
          "compare_at_price": null,
          "inventory_management": "shopify",
          "barcode": "023572474215",
          "featured_media": {
               "alt": "Black",
               "id": 21714337792207,
               "position": 1,
               "preview_image": {
                    "aspect_ratio": 0.813,
                    "height": 1500,
                    "width": 1220,
                    "src": "//k7z28xacwip1yfjq-57151226063.shopifypreview.com/cdn/shop/products/5705065_black_1-v2.jpg?v=1630016979"
               }
          },
          "requires_selling_plan": false,
          "selling_plan_allocations": [],
          "quantity_rule": {
               "min": 1,
               "max": null,
               "increment": 1
          }
     },
     {
          "id": 44313099796687,
          "title": "BLACK / 24''",
          "option1": "BLACK",
          "option2": "24''",
          "option3": null,
          "sku": "5705055-BLACK-24''",
          "requires_shipping": true,
          "taxable": true,
          "featured_image": {
               "id": 29456530243791,
               "product_id": 7642365001935,
               "position": 1,
               "created_at": "2021-08-26T18:29:36-04:00",
               "updated_at": "2021-08-26T18:29:39-04:00",
               "alt": "Black",
               "width": 1220,
               "height": 1500,
               "src": "//k7z28xacwip1yfjq-57151226063.shopifypreview.com/cdn/shop/products/5705065_black_1-v2.jpg?v=1630016979",
               "variant_ids": [
                    44313099763919,
                    44313099796687,
                    44313099829455,
                    44313099862223
               ]
          },
          "available": true,
          "name": "Out Of Bounds Lightweight Hard Side Spinner Suitcase - BLACK / 24''",
          "public_title": "BLACK / 24''",
          "options": [
               "BLACK",
               "24''"
          ],
          "price": 24000,
          "weight": 0,
          "compare_at_price": null,
          "inventory_management": "shopify",
          "barcode": "023572474239",
          "featured_media": {
               "alt": "Black",
               "id": 21714337792207,
               "position": 1,
               "preview_image": {
                    "aspect_ratio": 0.813,
                    "height": 1500,
                    "width": 1220,
                    "src": "//k7z28xacwip1yfjq-57151226063.shopifypreview.com/cdn/shop/products/5705065_black_1-v2.jpg?v=1630016979"
               }
          },
          "requires_selling_plan": false,
          "selling_plan_allocations": [],
          "quantity_rule": {
               "min": 1,
               "max": null,
               "increment": 1
          }
     },
]
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const variants = {{ product.variants | json }};
    let selectedColor = "{{ product.selected_or_first_available_variant.option1 }}";
    let selectedSize = "";
    const variantInput = document.getElementById("pdp-cart-btn");
    const addToCartBtn = document.querySelector(".add-to-cart-btn");
    const colorLinks = document.querySelectorAll(".color-swatch-link");
    const sizeItems = document.querySelectorAll(".size-item");
    const priceDisplay = document.getElementById("variant-price");
    const priceDisplayDesktop = document.getElementById("variant-price-desktop");
    const colorDisplay = document.getElementById("variant-color");
    const mainImage = document.getElementById("mainImage");
    const mobileImage = document.getElementById("mobileImage");

    function updateMainImage(variant) {
      const fallbackImage = "https://qhh83hshwulo64vw-57151226063.shopifypreview.com/products_preview?preview_key=b10dea078daba7983d8947514167dffa";

      if (variant && variant.featured_image && variant.featured_image.src) {
        const baseImage = variant.featured_image.src.replace(/(\.jpg|\.png).*/, '');
        mainImage.src = `${baseImage}_800x.jpg`;
        mainImage.setAttribute("data-zoom", `${baseImage}_1024x1024@2x.jpg`);
        mainImage.alt = variant.option1; // color

        mobileImage.src = `${baseImage}_800x.jpg`;
        mobileImage.alt = variant.option1;
      } else {
        mainImage.src = fallbackImage;
        mainImage.removeAttribute("data-zoom");
        mainImage.alt = "Product image";

        mobileImage.src = fallbackImage;
        mobileImage.alt = "Product image";
      }
    }

    function updateDisplayedPrice(matchedVariant) {
      if (matchedVariant) {
        const price = matchedVariant.price ? `$${(matchedVariant.price / 100).toFixed(2)}` : '';
        priceDisplay.textContent = price;
        priceDisplayDesktop.textContent = price;
        colorDisplay.textContent = selectedColor ? selectedColor : '';
      } else {
        priceDisplay.textContent = '';
        priceDisplayDesktop.textContent = '';
        colorDisplay.textContent = '';
      }
    }

    function updateSelectedVariant() {
      let matchedVariant = variants.find(v =>
        v.option1.toLowerCase() === selectedColor.toLowerCase() &&
        v.option2.toLowerCase() === selectedSize.toLowerCase()
      );

      if (!matchedVariant && selectedSize) {
        const numberMatch = selectedSize.match(/^\d+/);
        if (numberMatch) {
          const sizeNumber = numberMatch[0];
          matchedVariant = variants.find(v =>
            v.option1.toLowerCase() === selectedColor.toLowerCase() &&
            v.option2.toLowerCase().startsWith(sizeNumber)
          );
        }
      }

      if (!matchedVariant) {
        matchedVariant = variants.find(v =>
          v.option1.toLowerCase() === selectedColor.toLowerCase()
        );
      }

      if (matchedVariant && matchedVariant.available) {
        variantInput.value = matchedVariant.id;
        addToCartBtn.disabled = false;
        updateMainImage(matchedVariant);
      } else {
        variantInput.value = "";
        addToCartBtn.disabled = true;
        updateMainImage(null); // show fallback
      }

      updateDisplayedPrice(matchedVariant);
    }

    function selectFirstAvailableSizeForColor() {
      let firstAvailable = null;
      sizeItems.forEach(item => {
        const size = item.textContent.trim();
        const matchingVariant = variants.find(v =>
          v.option1.toLowerCase() === selectedColor.toLowerCase() &&
          v.option2.toLowerCase() === size.toLowerCase() &&
          v.available
        );
        item.classList.remove("active");
        if (matchingVariant && !firstAvailable) {
          firstAvailable = item;
          selectedSize = size;
        }
      });

      if (firstAvailable) {
        firstAvailable.classList.add("active");
        updateSelectedVariant();
      }
    }

    colorLinks.forEach(link => {
      link.addEventListener("click", () => {
        colorLinks.forEach(l => l.classList.remove("active"));
        link.classList.add("active");
        selectedColor = link.dataset.colorName || link.textContent.trim();
        document.querySelector("#selected-color strong").innerText = selectedColor.toUpperCase();
        selectedSize = "";
        sizeItems.forEach(item => item.classList.remove("active"));

        // Update available sizes
        sizeItems.forEach(item => {
          const size = item.textContent.trim();
          const matchingVariant = variants.find(v =>
            v.option1.toLowerCase() === selectedColor.toLowerCase() &&
            v.option2.toLowerCase() === size.toLowerCase()
          );
          if (matchingVariant && matchingVariant.available) {
            item.classList.remove("size-unavailable");
          } else {
            item.classList.add("size-unavailable");
          }
        });

        selectFirstAvailableSizeForColor();
      });
    });

    sizeItems.forEach(item => {
      item.addEventListener("click", () => {
        if (item.classList.contains("size-unavailable")) return;

        if (item.classList.contains("active")) {
          item.classList.remove("active");
          selectedSize = "";
          variantInput.value = "";
          addToCartBtn.disabled = true;
          updateDisplayedPrice(null);
          updateMainImage(null);
          selectFirstAvailableSizeForColor();
        } else {
          sizeItems.forEach(i => i.classList.remove("active"));
          item.classList.add("active");
          selectedSize = item.dataset.sizeName || item.textContent.trim();
          updateSelectedVariant();
        }
      });
    });

    // Initialize first color
    const firstColorLink = colorLinks[0];
    if (firstColorLink) {
      firstColorLink.classList.add("active");
      selectedColor = firstColorLink.dataset.colorName || firstColorLink.textContent.trim();
      document.querySelector("#selected-color strong").innerText = selectedColor.toUpperCase();

      sizeItems.forEach(item => {
        const size = item.textContent.trim();
        const matchingVariant = variants.find(v =>
          v.option1.toLowerCase() === selectedColor.toLowerCase() &&
          v.option2.toLowerCase() === size.toLowerCase()
        );
        if (matchingVariant && matchingVariant.available) {
          item.classList.remove("size-unavailable");
        } else {
          item.classList.add("size-unavailable");
        }
      });

      selectFirstAvailableSizeForColor();
    }
  });
</script>




